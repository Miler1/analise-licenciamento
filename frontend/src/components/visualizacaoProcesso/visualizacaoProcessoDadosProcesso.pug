#dadosProcesso

	div.row

		.col-xs-12.col-md-8
			blockquote.success
				div.row
					label.col-sm-4 Tipo do Licenciamento:
					span.col-sm-8(ng-repeat="caracterizacao in modalVisualizacaoProcessoCtrl.dadosProcesso.caracterizacoes") {{caracterizacao.tipo.nome}} 

				div.row
					label.col-sm-4 Licença Solicitada:
					div.col-sm-8
						span(ng-repeat="licenca in modalVisualizacaoProcessoCtrl.processo.licencas") {{licenca}}

			blockquote.success
				div.row
					label.col-sm-4 Tipologia:
					span.col-sm-8(ng-repeat="caracterizacao in modalVisualizacaoProcessoCtrl.dadosProcesso.caracterizacoes")
						div(ng-repeat="atividadeCaracterizacao in caracterizacao.atividadesCaracterizacao") {{atividadeCaracterizacao.atividade.tipologia.nome}} 
				div.row
					label.col-sm-4 Atividade(s) Licenciada(s):
					.col-sm-8
						div(ng-repeat="caracterizacao in modalVisualizacaoProcessoCtrl.dadosProcesso.caracterizacoes")
							span(ng-repeat="atividadeCaracterizacao in caracterizacao.atividadesCaracterizacao") {{atividadeCaracterizacao.atividade.nome}} 
									div(ng-repeat='atividadeCnae in atividadeCaracterizacao.atividadesCnae')
										label CNAE
										ul
											li {{atividadeCnae.codigo}} - {{atividadeCnae.nome}}

		.col-xs-12.col-md-4
			div.panel.panel-success
				div.panel-body
					| Parâmetro
				div.panel-footer.text-center
					.media-div
						.media-context
							div(ng-repeat="caracterizacao in modalVisualizacaoProcessoCtrl.dadosProcesso.caracterizacoes")
								div(ng-repeat="atividadeCaracterizacao in caracterizacao.atividadesCaracterizacao")
									h5.info {{atividadeCaracterizacao.atividade.nome}}
									div(ng-repeat="atividadeCaracterizacaoParametro in atividadeCaracterizacao.atividadeCaracterizacaoParametros")
										ul(style="margin-left:25px")
											li
												span {{atividadeCaracterizacao.atividade.parametros[$index].codigo}} - {{atividadeCaracterizacao.atividade.parametros[$index].nome}} : {{atividadeCaracterizacaoParametro.valorParametro}}

			div.panel.panel-success
				div.panel-body
					| Porte/Potencial Poluidor Degradador
				div.panel-footer.text-center
					.media-div
						.media-context
							div(ng-repeat="caracterizacao in modalVisualizacaoProcessoCtrl.dadosProcesso.caracterizacoes")
								div(ng-repeat="atividadeCaracterizacao in caracterizacao.atividadesCaracterizacao") {{atividadeCaracterizacao.porteEmpreendimento.codigo}} - {{modalVisualizacaoProcessoCtrl.getMaiorPotencialPoluidor(caracterizacao.atividadesCaracterizacao).codigo}}
	div.row
		.col-xs-12.col-md-6
			blockquote.success
				h4 Histórico do protocolo
				label Data: &nbsp;
				span {{modalVisualizacaoProcessoCtrl.dateUtil.getTodaysStringDate()}}

				div.panel.panel-success
					div.panel-body
						| Análise do protocolo em dias
					div.panel-footer
						.row
							.col-xs-4.col-md-4.text-center
								span Análise GEO
									div(ng-class="{'error-message': modalVisualizacaoProcessoCtrl.dateUtil.verificaPrazoMinimo(modalVisualizacaoProcessoCtrl.processo.diasAnaliseGeo , modalVisualizacaoProcessoCtrl.PrazoAnalise.ANALISE_GEO)}")
										b {{modalVisualizacaoProcessoCtrl.processo.diasAnaliseGeo == null ? ' - ' : modalVisualizacaoProcessoCtrl.processo.diasAnaliseGeo}}
							.col-xs-4.col-md-4.text-center
								span Análise técnica
									div(ng-class="{'error-message': modalVisualizacaoProcessoCtrl.dateUtil.verificaPrazoMinimo(modalVisualizacaoProcessoCtrl.processo.diasAnaliseTecnica , modalVisualizacaoProcessoCtrl.PrazoAnalise.ANALISE_TECNICA)}")
										b {{modalVisualizacaoProcessoCtrl.processo.diasAnaliseTecnica == null ? ' - ' : modalVisualizacaoProcessoCtrl.processo.diasAnaliseTecnica}}
							.col-xs-4.col-md-4.text-center
								span Análise total
									div
										b {{modalVisualizacaoProcessoCtrl.processo.totalDiasAnalise == null ? ' - ' : modalVisualizacaoProcessoCtrl.processo.totalDiasAnalise}}

	div(ng-if="modalVisualizacaoProcessoCtrl.dadosProcesso.historicoTramitacao.length > 0")
		div(ng-if="modalVisualizacaoProcessoCtrl.processo.idCondicaoTramitacao !== modalVisualizacaoProcessoCtrl.comparaStatus.AGUARDANDO_VALIDACAO_GEO_PELO_GERENTE || modalVisualizacaoProcessoCtrl.perfis.ANALISTA_GEO !== modalVisualizacaoProcessoCtrl.usuarioLogadoCodigoPerfil")
			h4 Tramitação:

			div(uib-accordion class="accordion")
				div(uib-accordion-group class="panel-default" is-open="modalVisualizacaoProcessoCtrl.abreTramitacaoProcessoAtual")
					uib-accordion-heading(ng-click="modalVisualizacaoProcessoCtrl.abreTramitacaoProcessoAtual=!modalVisualizacaoProcessoCtrl.abreTramitacaoProcessoAtual")
						div Tramitação do Protocolo Atual
							i(class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': modalVisualizacaoProcessoCtrl.abreTramitacaoProcessoAtual, 'glyphicon-chevron-right': !modalVisualizacaoProcessoCtrl.abreTramitacaoProcessoAtual}")

					div
						table.table.table-striped.table-condensed

							thead
								tr
									th Data Entrada
									th Data Saída
									th Status
									th Ação
									th Tempo do Status
									th Responsável
									th Setor
									th Notificação

							tbody
								tr(ng-repeat="tramitacao in modalVisualizacaoProcessoCtrl.dadosProcesso.historicoTramitacao")
									td.col-md-1 {{tramitacao.dataInicial ? tramitacao.dataInicial : '-'}}
									td.col-md-1 {{tramitacao.dataFinal ? tramitacao.dataFinal : '-'}}
									td.col-md-2 {{tramitacao.nomeCondicaoFinal ? tramitacao.nomeCondicaoFinal : '-'}}
									td.col-md-2 {{tramitacao.nomeAcao ? tramitacao.nomeAcao : '-'}}
									td.col-md-1 {{tramitacao.tempoPermanencia ? tramitacao.tempoPermanencia : '-'}}
									td.col-md-3 {{tramitacao.nomeUsuarioExecutor ? tramitacao.nomeUsuarioExecutor : '-'}}
									td.col-md-1 {{tramitacao.setor.sigla ? tramitacao.setor.sigla : '-'}}
									td.col-md-1.text-center(ng-if="tramitacao.hasNotificacoes")

										i.notificacao-icone.glyphicon.glyphicon-save-file(ng-click="modalVisualizacaoProcessoCtrl.downloadNotificacao(tramitacao.idHistorico)",
										title="Gerar PDF da notificação")

										.dropdown.action-table.pull-right.margin-right-xs.margin-left-xs(ng-if="tramitacao.documentosCorrigidos !== null")
											i.notificacao-icone.glyphicon.glyphicon-duplicate(type='button', data-toggle='dropdown', aria-haspopup='true', aria-expanded='true',
											title="Documentos recebidos após notificação")
											ul.dropdown-menu.dropdown-menu-right(aria-labelledby='dropdownMenu1')
												li(ng-repeat="documentoCorrigido in tramitacao.documentosCorrigidos")
													a(ng-click="modalVisualizacaoProcessoCtrl.downloadDocumentoLicenciamento(documentoCorrigido.id)")
														i.glyphicon.glyphicon-save-file
														span(title="{{ documentoCorrigido.tipo.nome }}") {{ (documentoCorrigido.tipo.nome.length > 80 ? documentoCorrigido.tipo.nome.substring(0, 70) + '...' : documentoCorrigido.tipo.nome) }}

									td.col-md-1.text-center(ng-if="!tramitacao.hasNotificacoes")
										span.notificacao-sem-icone
											| -


		div(uib-accordion class="accordion" ng-if="modalVisualizacaoProcessoCtrl.dadosProcesso.historicoTramitacaoAnterior.length > 0")
			div(uib-accordion-group class="panel-default" is-open="modalVisualizacaoProcessoCtrl.abreTramitacaoProcessoAnterior")
				uib-accordion-heading(ng-click="modalVisualizacaoProcessoCtrl.abreTramitacaoProcessoAnterior=!modalVisualizacaoProcessoCtrl.abreTramitacaoProcessoAnterior")
					div Tramitação do Protocolo Anterior
						i(class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': modalVisualizacaoProcessoCtrl.abreTramitacaoProcessoAnterior, 'glyphicon-chevron-right': !modalVisualizacaoProcessoCtrl.abreTramitacaoProcessoAnterior}")

				div

					table.table.table-striped.table-condensed

						thead
							tr
								th Data Entrada
								th Data Saída
								th Status
								th Ação
								th Tempo do Status
								th Responsável
								th Setor
								th Notificação

						tbody
							tr(ng-repeat="tramitacao in modalVisualizacaoProcessoCtrl.dadosProcesso.historicoTramitacaoAnterior")
								td.col-md-1 {{tramitacao.dataInicial ? tramitacao.dataInicial : '-'}}
								td.col-md-1 {{tramitacao.dataFinal ? tramitacao.dataFinal : '-'}}
								td.col-md-2 {{tramitacao.nomeCondicaoFinal ? tramitacao.nomeCondicaoFinal : '-'}}
								td.col-md-2 {{tramitacao.nomeAcao ? tramitacao.nomeAcao : '-'}}
								td.col-md-1 {{tramitacao.tempoPermanencia ? tramitacao.tempoPermanencia : '-'}}
								td.col-md-3 {{tramitacao.nomeUsuarioExecutor ? tramitacao.nomeUsuarioExecutor : '-'}}
								td.col-md-1 {{tramitacao.relHistoricoTramitacaoSetor.siglaSetor ? tramitacao.relHistoricoTramitacaoSetor.siglaSetor : '-'}}
								td.col-md-1.text-center(ng-if="tramitacao.hasNotificacoes")

									i.notificacao-icone.glyphicon.glyphicon-save-file(ng-click="modalVisualizacaoProcessoCtrl.downloadNotificacao(tramitacao.idHistorico)",
									title="Gerar PDF da notificação")

									.dropdown.action-table.pull-right.margin-right-xs.margin-left-xs(ng-if="tramitacao.documentosCorrigidos !== null")
										i.notificacao-icone.glyphicon.glyphicon-duplicate(type='button', data-toggle='dropdown', aria-haspopup='true', aria-expanded='true',
										title="Documentos recebidos após notificação")
										ul.dropdown-menu.dropdown-menu-right(aria-labelledby='dropdownMenu1')
											li(ng-repeat="documentoCorrigido in tramitacao.documentosCorrigidos")
												a(ng-click="modalVisualizacaoProcessoCtrl.downloadDocumentoLicenciamento(documentoCorrigido.id)")
													i.glyphicon.glyphicon-save-file
													span(title="{{ documentoCorrigido.tipo.nome }}") {{ (documentoCorrigido.tipo.nome.length > 80 ? documentoCorrigido.tipo.nome.substring(0, 70) + '...' : documentoCorrigido.tipo.nome) }}

								td.col-md-1.text-center(ng-if="!tramitacao.hasNotificacoes")
									span.notificacao-sem-icone
										| -
